<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Shaka Player — Simple HLS</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/shaka-player@latest/dist/controls.css">
  <style>
    html,body{height:100%;margin:0;background:#000}
    #container{max-width:100vw;max-height:100vh;aspect-ratio:16/9;margin:auto}
    video{width:100%;height:100%;display:block;background:#000}
  </style>
</head>
<body>
  <div id="container" class="shaka-player-container" data-shaka-player-container>
    <video id="video" class="shaka-video" playsinline></video>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/shaka-player@latest/dist/shaka-player.ui.min.js"></script>
  <script>
    // ---- শুধু এই লাইনটা বদলালেই আপনার লিংক প্লে করবে ----
    const STREAM_URL = "https://tataplay.slivcdn.com/hls/live/2020591/TEN3HD/master_664.m3u8";
    // ------------------------------------------------------

    async function main(){
      shaka.polyfill.installAll();
      if(!shaka.Player.isBrowserSupported()){
        alert("Browser not supported for playback."); return;
      }

      const video = document.getElementById("video");
      const container = document.getElementById("container");

      // Basic Shaka UI (play/pause, seek, volume, fullscreen)
      const ui = new shaka.ui.Overlay(null, container, video);
      const player = ui.getControls().getPlayer();

      // Minimal safe defaults
      player.configure({
        streaming: { lowLatencyMode: true },
        abr: { enabled: true }
      });

      player.addEventListener("error", e => console.error("Shaka error:", e.detail));

      try{
        await player.load(STREAM_URL);   // HLS .m3u8
        // muted autoplay চেষ্টা; না হলে ইউজার নিজে প্লে করবেন
        video.muted = true;
        await video.play().catch(()=>{});
      }catch(err){
        console.error(err);
        alert("Failed to load stream. (CORS/geo/URL issue?)");
      }
    }
    document.addEventListener("DOMContentLoaded", main);
  </script>
</body>
</html>
